@namespace GFC.BlazorServer.Components.Shared

<div class="top-toolbar-container">
    <div class="toolbar-section">
        <button class="toolbar-btn" @onclick="OnSave" disabled="@(!IsDirty)">
            <span class="oi oi-data-transfer-upload"></span> Save
        </button>
        <button class="toolbar-btn" @onclick="OnExport">
            <span class="oi oi-document"></span> Export
        </button>
    </div>
    <div class="toolbar-section">
        <button class="toolbar-btn" @onclick="OnUndo" disabled="@(!CanUndo)">
            <span class="oi oi-action-undo"></span>
        </button>
        <button class="toolbar-btn" @onclick="OnRedo" disabled="@(!CanRedo)">
            <span class="oi oi-action-redo"></span>
        </button>
    </div>
    <div class="toolbar-section viewport-controls">
        <button class="toolbar-btn @(IsViewportActive("desktop") ? "active" : "")" @onclick='() => OnViewportChanged.InvokeAsync("desktop")'>
            <span class="oi oi-monitor"></span>
        </button>
        <button class="toolbar-btn @(IsViewportActive("tablet") ? "active" : "")" @onclick='() => OnViewportChanged.InvokeAsync("tablet")'>
            <span class="oi oi-tablet"></span>
        </button>
        <button class="toolbar-btn @(IsViewportActive("mobile") ? "active" : "")" @onclick='() => OnViewportChanged.InvokeAsync("mobile")'>
            <span class="oi oi-phone"></span>
        </button>
    </div>
</div>

@code {
    [Parameter]
    public bool IsDirty { get; set; }

    [Parameter]
    public bool CanUndo { get; set; }

    [Parameter]
    public bool CanRedo { get; set; }

    [Parameter]
    public string CurrentViewport { get; set; } = "desktop";

    [Parameter]
    public EventCallback OnSave { get; set; }

    [Parameter]
    public EventCallback OnExport { get; set; }

    [Parameter]
    public EventCallback OnUndo { get; set; }

    [Parameter]
    public EventCallback OnRedo { get; set; }

    [Parameter]
    public EventCallback<string> OnViewportChanged { get; set; }

    private bool IsViewportActive(string viewport) => CurrentViewport == viewport;
}
