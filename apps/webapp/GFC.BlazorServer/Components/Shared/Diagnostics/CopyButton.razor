<!-- [NEW] -->
@namespace GFC.BlazorServer.Components.Shared.Diagnostics
@inject IJSRuntime JSRuntime
@implements IDisposable

<button class="copy-button @(_copied ? "copied" : "")" @onclick="CopyToClipboard">
    <span class="copy-icon">@(Icon ?? "ðŸ“‹")</span>
    <span class="copy-text">@(_copied ? CopiedText : DefaultText)</span>
</button>

@code {
    private bool _copied = false;
    private Timer _timer;

    [Parameter] public string TextToCopy { get; set; }
    [Parameter] public string Icon { get; set; }
    [Parameter] public string DefaultText { get; set; } = "Copy";
    [Parameter] public string CopiedText { get; set; } = "Copied!";

    private async Task CopyToClipboard()
    {
        await JSRuntime.InvokeVoidAsync("navigator.clipboard.writeText", TextToCopy);
        _copied = true;
        StateHasChanged();

        _timer?.Dispose();
        _timer = new Timer(_ =>
        {
            _copied = false;
            InvokeAsync(StateHasChanged);
        }, null, 2000, Timeout.Infinite);
    }

    public void Dispose()
    {
        _timer?.Dispose();
    }
}
