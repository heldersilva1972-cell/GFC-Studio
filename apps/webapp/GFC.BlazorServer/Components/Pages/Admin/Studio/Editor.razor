@page "/admin/studio/editor"
@using GFC.BlazorServer.Components.Layout
@layout FullPageLayout

@using GFC.BlazorServer.Components.Pages.Admin.Studio.TopBar
@using GFC.BlazorServer.Components.Pages.Admin.Studio.LeftPanel
@using GFC.BlazorServer.Components.Pages.Admin.Studio.RightPanel
@using CanvasComponent = GFC.BlazorServer.Components.Pages.Admin.Studio.Canvas.Canvas

@inject ILogger<Editor> Logger

<div class="studio-container">
    <div class="top-bar">
        <TopBar OnDeviceToggle="HandleDeviceToggle" OnPageChange="HandlePageChange" />
    </div>
    <div class="left-panel">
        <LeftPanel />
    </div>
    <div class="canvas">
        <CanvasComponent @ref="canvas" />
    </div>
    <div class="right-panel">
        <RightPanel />
    </div>
</div>

@code {
    private CanvasComponent canvas;

    private void HandleDeviceToggle(TopBar.DeviceView view)
    {
        canvas.SetDeviceView(view);
    }

    private void HandlePageChange(int pageId)
    {
        Logger.LogInformation("Selected page ID: {PageId}", pageId);
        // We will load the page data in a later step
    }
}
