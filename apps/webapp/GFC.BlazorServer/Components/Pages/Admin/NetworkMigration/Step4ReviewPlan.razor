@using GFC.BlazorServer.Services.NetworkMigration

<div>
    <h5 class="mb-4">Review Migration Plan</h5>

    <div class="alert alert-warning">
        <i class="bi bi-exclamation-triangle-fill me-2"></i>
        <strong>Important:</strong> Please review the changes carefully before proceeding
    </div>

    <div class="row g-3">
        <div class="col-md-6">
            <div class="card h-100">
                <div class="card-header bg-light">
                    <strong>FROM (Current)</strong>
                </div>
                <div class="card-body">
                    <dl class="mb-0">
                        <dt>Network Type</dt>
                        <dd>@CurrentConfig.NetworkType</dd>
                        <dt>IP Address</dt>
                        <dd>@CurrentConfig.IpAddress:@CurrentConfig.Port</dd>
                        @if (CurrentConfig.VpnProfileId.HasValue)
                        {
                            <dt>VPN Profile</dt>
                            <dd>@CurrentConfig.VpnProfileName</dd>
                        }
                    </dl>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card h-100 border-primary">
                <div class="card-header bg-primary text-white">
                    <strong>TO (New)</strong>
                </div>
                <div class="card-body">
                    <dl class="mb-0">
                        <dt>Network Type</dt>
                        <dd>@Request.TargetNetworkType</dd>
                        <dt>IP Address</dt>
                        <dd>@Request.NewIpAddress:@Request.NewPort</dd>
                        @if (Request.VpnProfileId.HasValue)
                        {
                            <dt>VPN Profile</dt>
                            <dd>VPN Profile ID: @Request.VpnProfileId</dd>
                        }
                    </dl>
                </div>
            </div>
        </div>
    </div>

    <div class="alert alert-info mt-4">
        <h6><i class="bi bi-shield-check me-2"></i>Safety Features</h6>
        <ul class="mb-0">
            <li>Old configuration will be saved as backup for 24 hours</li>
            <li>You can rollback if the new configuration doesn't work</li>
            <li>Door access will continue working during migration</li>
            <li>All changes are logged for audit purposes</li>
        </ul>
    </div>

    @if (!string.IsNullOrEmpty(Request.Notes))
    {
        <div class="card mt-3">
            <div class="card-body">
                <h6>Notes</h6>
                <p class="mb-0">@Request.Notes</p>
            </div>
        </div>
    }

    <div class="mt-4 d-flex justify-content-between">
        <button class="btn btn-secondary" @onclick="OnBack">
            <i class="bi bi-arrow-left"></i> Back
        </button>
        <button class="btn btn-success btn-lg" @onclick="OnExecute">
            <i class="bi bi-check-circle me-2"></i> Apply Migration
        </button>
    </div>
</div>

@code {
    [Parameter] public NetworkConfiguration CurrentConfig { get; set; } = new();
    [Parameter] public NetworkMigrationRequest Request { get; set; } = new();
    [Parameter] public EventCallback OnBack { get; set; }
    [Parameter] public EventCallback OnExecute { get; set; }
}
