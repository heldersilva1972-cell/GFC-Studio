@using GFC.BlazorServer.Services.NetworkMigration

<div>
    <h5 class="mb-4">Configure New Network Settings</h5>

    <div class="alert alert-info">
        <i class="bi bi-arrow-right me-2"></i>
        Migrating to: <strong>@Request.TargetNetworkType Network</strong>
    </div>

    <div class="mb-3">
        <label class="form-label">IP Address <span class="text-danger">*</span></label>
        <input type="text" class="form-control" @bind="Request.NewIpAddress" 
               placeholder="e.g., 10.99.0.2 or 192.168.1.100" />
        <div class="form-text">Enter the IP address where the controller will be accessible</div>
    </div>

    <div class="mb-3">
        <label class="form-label">Port <span class="text-danger">*</span></label>
        <input type="number" class="form-control" @bind="Request.NewPort" 
               placeholder="60000" min="1" max="65535" />
        <div class="form-text">Default: 60000 (Wiegand controller port)</div>
    </div>

    @if (Request.TargetNetworkType == "VPN" || Request.TargetNetworkType == "Remote")
    {
        <div class="mb-3">
            <label class="form-label">VPN Profile</label>
            <select class="form-select" @bind="Request.VpnProfileId">
                <option value="">-- Select VPN Profile --</option>
                @* TODO: Load VPN profiles from database *@
                <option value="1">Remote Site VPN</option>
                <option value="2">Backup VPN</option>
            </select>
            <div class="form-text">
                Select the VPN profile to use for this connection
            </div>
        </div>
    }

    <div class="mb-3">
        <label class="form-label">Notes (Optional)</label>
        <textarea class="form-control" rows="3" @bind="Request.Notes" 
                  placeholder="e.g., Relocating controller to remote building"></textarea>
    </div>

    <div class="form-check mb-3">
        <input class="form-check-input" type="checkbox" @bind="Request.SkipConnectionTest" id="skipTest" />
        <label class="form-check-label" for="skipTest">
            Skip connection test (not recommended)
        </label>
    </div>

    <div class="mt-4 d-flex justify-content-between">
        <button class="btn btn-secondary" @onclick="OnBack">
            <i class="bi bi-arrow-left"></i> Back
        </button>
        <button class="btn btn-primary" @onclick="OnNext">
            Next: Test Connection <i class="bi bi-arrow-right"></i>
        </button>
    </div>
</div>

@code {
    [Parameter] public NetworkMigrationRequest Request { get; set; } = new();
    [Parameter] public EventCallback OnBack { get; set; }
    [Parameter] public EventCallback OnNext { get; set; }
}
